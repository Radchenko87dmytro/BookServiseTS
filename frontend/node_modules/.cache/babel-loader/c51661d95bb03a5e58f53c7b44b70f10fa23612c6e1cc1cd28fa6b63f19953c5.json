{"ast":null,"code":"import _regeneratorRuntime from\"D:/Documents/GitHub/BookServiseTS/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/Documents/GitHub/BookServiseTS/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/Documents/GitHub/BookServiseTS/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import{getAllBooks}from'../../apiClient';import{Book}from'../Book';import{PaginationBooks}from'../../components/PaginationBooks';import{Navbar}from'../../components/Navbar';import{Loading}from'../../components/Loading';import{useDispatch,useSelector}from'react-redux';import{setBooks}from'../../reducer';import{getBooksApi}from'../../apiClient';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";// const bookIntro = (longText: string): string =>\n//     longText.slice(0, 50).trim() + '...';\nexport var Books=function Books(){var dispatch=useDispatch();var booksState=useSelector(function(state){return state.booksReducer.books;});//console.log(booksState);\nvar _useState=useState(true),_useState2=_slicedToArray(_useState,2),isLoading=_useState2[0],setIsLoading=_useState2[1];//const [books, setBooks] = useState<WolnelekturyAPIType[]>([]);\nvar _useState3=useState(1),_useState4=_slicedToArray(_useState3,2),currentPage=_useState4[0],setCurrentPage=_useState4[1];var _useState5=useState(6),_useState6=_slicedToArray(_useState5,2),booksPerPage=_useState6[0],setBooksPerPage=_useState6[1];var lastBooksIndex=currentPage*booksPerPage;var firstBooksIndex=lastBooksIndex-booksPerPage;var currentBooks=booksState.slice(firstBooksIndex,lastBooksIndex);// const deleteBookHandler = (id: number) => {\n//     console.log(books);\n//     console.log('delete book ' + id);\n//     //setBookValue([...bookValue].splice(item.id, 1))\n//     //setBookValue(bookValue.filter((item: {}) => item.id !== id)); //filter((item: {}) => item.id !== id)\n//     //setBookValue(bookValue.filter((item: {}) => item.id !== id));\n// };\nuseEffect(function(){_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var result;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return getAllBooks();case 3:result=_context.sent;//setBooks(result);\ndispatch(setBooks(result));setIsLoading(false);_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);console.error('Error:',_context.t0);case 11:case\"end\":return _context.stop();}},_callee,null,[[0,8]]);}))();},[]);useEffect(function(){_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var result;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return getBooksApi();case 3:result=_context2.sent;//console.log(result);\ndispatch(setBooks(result.books));setIsLoading(false);_context2.next=11;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](0);console.error('Error:',_context2.t0);case 11:case\"end\":return _context2.stop();}},_callee2,null,[[0,8]]);}))();},[]);// function getBooksApi() {\n//     return new Promise((resolve, reject) => {\n//\n//             //resolve(\" dane\");\n//             reject(\" błąd\");\n//         }\n//     });\n// }\n// getContent()\n//     .then(result => {\n//         const result = await getAllBooks();\n//         dispatch(setBooks(result));\n//         setIsLoading(false);\n//     })\n//     .catch(error => {\n//         console.error(error);\n//     });\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"w-full h-full\",children:[/*#__PURE__*/_jsx(Navbar,{content:\"A list of books\"}),isLoading?/*#__PURE__*/_jsx(Loading,{}):/*#__PURE__*/_jsxs(\"div\",{className:\"bg-slate-100 py-10 flex justify-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute flex justify-center\",children:/*#__PURE__*/_jsx(\"p\",{className:\"py-8 text-4xl text-slate-400 flex justify-center font-bold\",children:\"A list of books\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid gap-10 grid-cols-3 grid-rows-3 my-28 w-3/4\",children:[currentBooks.map(function(book,index){return/*#__PURE__*/_jsx(Book,{book:book},index);}),/*#__PURE__*/_jsx(PaginationBooks,{totalBooks:booksState.length,booksPerPage:booksPerPage,setBooksPerPage:setBooksPerPage,currentPage:currentPage,setCurrentPage:setCurrentPage})]})]})]});};","map":{"version":3,"names":["React","useState","useEffect","getAllBooks","Book","PaginationBooks","Navbar","Loading","useDispatch","useSelector","setBooks","getBooksApi","jsx","_jsx","jsxs","_jsxs","Books","dispatch","booksState","state","booksReducer","books","_useState","_useState2","_slicedToArray","isLoading","setIsLoading","_useState3","_useState4","currentPage","setCurrentPage","_useState5","_useState6","booksPerPage","setBooksPerPage","lastBooksIndex","firstBooksIndex","currentBooks","slice","_asyncToGenerator","_regeneratorRuntime","mark","_callee","result","wrap","_callee$","_context","prev","next","sent","t0","console","error","stop","_callee2","_callee2$","_context2","className","children","content","map","book","index","totalBooks","length"],"sources":["D:/Documents/GitHub/BookServiseTS/frontend/src/screens/Books/index.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { StoreType, book, storeType } from '../../types';\r\nimport { Hyperlink } from '../../components/Hyperlink';\r\nimport { Button } from '../../components/Button';\r\nimport { getAllBooks } from '../../apiClient';\r\nimport { WolnelekturyAPIType } from '../../types';\r\nimport { Book } from '../Book';\r\nimport { PaginationBooks } from '../../components/PaginationBooks';\r\nimport { BookDetails } from '../BookDetails';\r\nimport { Navbar } from '../../components/Navbar';\r\nimport { Loading } from '../../components/Loading';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { setBooks } from '../../reducer';\r\nimport { getBooksApi } from '../../apiClient';\r\n\r\ninterface props {\r\n    //books: WolnelekturyAPIType;\r\n    book: WolnelekturyAPIType;\r\n    //bookHandler: () => WolnelekturyAPIType;\r\n}\r\n\r\n// const bookIntro = (longText: string): string =>\r\n//     longText.slice(0, 50).trim() + '...';\r\n\r\nexport const Books = () => {\r\n    const dispatch = useDispatch();\r\n    const booksState = useSelector(\r\n        (state: StoreType) => state.booksReducer.books\r\n    );\r\n    //console.log(booksState);\r\n\r\n    const [isLoading, setIsLoading] = useState(true);\r\n    //const [books, setBooks] = useState<WolnelekturyAPIType[]>([]);\r\n\r\n    const [currentPage, setCurrentPage] = useState(1);\r\n    const [booksPerPage, setBooksPerPage] = useState(6);\r\n\r\n    const lastBooksIndex = currentPage * booksPerPage;\r\n    const firstBooksIndex = lastBooksIndex - booksPerPage;\r\n    const currentBooks = booksState.slice(firstBooksIndex, lastBooksIndex);\r\n\r\n    // const deleteBookHandler = (id: number) => {\r\n    //     console.log(books);\r\n    //     console.log('delete book ' + id);\r\n    //     //setBookValue([...bookValue].splice(item.id, 1))\r\n    //     //setBookValue(bookValue.filter((item: {}) => item.id !== id)); //filter((item: {}) => item.id !== id)\r\n    //     //setBookValue(bookValue.filter((item: {}) => item.id !== id));\r\n    // };\r\n\r\n    useEffect(() => {\r\n        (async () => {\r\n            try {\r\n                const result = await getAllBooks();\r\n                //setBooks(result);\r\n                dispatch(setBooks(result));\r\n                setIsLoading(false);\r\n            } catch (error) {\r\n                console.error('Error:', error);\r\n            }\r\n        })();\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        (async () => {\r\n            try {\r\n                const result = await getBooksApi();\r\n                //console.log(result);\r\n                dispatch(setBooks(result.books));\r\n                setIsLoading(false);\r\n            } catch (error) {\r\n                console.error('Error:', error);\r\n            }\r\n        })();\r\n    }, []);\r\n\r\n    // function getBooksApi() {\r\n    //     return new Promise((resolve, reject) => {\r\n    //\r\n    //             //resolve(\" dane\");\r\n    //             reject(\" błąd\");\r\n    //         }\r\n    //     });\r\n    // }\r\n\r\n    // getContent()\r\n    //     .then(result => {\r\n    //         const result = await getAllBooks();\r\n\r\n    //         dispatch(setBooks(result));\r\n    //         setIsLoading(false);\r\n    //     })\r\n    //     .catch(error => {\r\n    //         console.error(error);\r\n    //     });\r\n\r\n    return (\r\n        <div className=\"w-full h-full\">\r\n            <Navbar content=\"A list of books\" />\r\n            {isLoading ? (\r\n                <Loading />\r\n            ) : (\r\n                <div className=\"bg-slate-100 py-10 flex justify-center\">\r\n                    <div className=\"absolute flex justify-center\">\r\n                        <p className=\"py-8 text-4xl text-slate-400 flex justify-center font-bold\">\r\n                            A list of books\r\n                        </p>\r\n                    </div>\r\n                    <div className=\"grid gap-10 grid-cols-3 grid-rows-3 my-28 w-3/4\">\r\n                        {currentBooks.map((book, index) => (\r\n                            <Book book={book} key={index} />\r\n                        ))}\r\n\r\n                        <PaginationBooks\r\n                            totalBooks={booksState.length}\r\n                            booksPerPage={booksPerPage}\r\n                            setBooksPerPage={setBooksPerPage}\r\n                            currentPage={currentPage}\r\n                            setCurrentPage={setCurrentPage}\r\n                        />\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}